<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sabores ExÃ³ticos Â· Sistema Integrado</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <!-- Hoja de estilos externa -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- ============================================================
     BARRA DE NAVEGACIÃ“N PRINCIPAL
============================================================ -->
<nav class="nav-tabs">
  <div class="nav-brand">
    <span class="dot"></span>
    Sabores ExÃ³ticos
  </div>
  <ul class="nav-links">
    <li>
      <button class="active" onclick="showPage('clientePage', this)">
        ğŸ¦ MenÃº &amp; Pedido
      </button>
    </li>
    <li>
      <button onclick="showPage('cocinaPage', this)">
        ğŸ‘¨â€ğŸ³ Cocina
        <span class="badge" id="kitchenBadge">0</span>
      </button>
    </li>
    <li>
      <button onclick="showPage('erpPage', this)">
        ğŸ“Š ERP / POS
      </button>
    </li>
  </ul>
</nav>


<!-- ============================================================
     PÃGINA 1: CLIENTE â€” MenÃº y Pedido
============================================================ -->
<section class="page active" id="clientePage">

  <!-- Hero / Cabecera -->
  <header class="hero">
    <div class="hero-inner">
      <div>
        <p class="hero-tagline">HeladerÃ­a Artesanal Â· Biodiversidad Colombiana</p>
        <h1>Sabores<br><em>ExÃ³ticos</em></h1>
        <div class="hero-origins">
          <span class="origin-chip">ğŸŒ³ Amazonas</span>
          <span class="origin-chip">ğŸŒŠ ChocÃ³</span>
          <span class="origin-chip">ğŸ Caribe</span>
          <span class="origin-chip">ğŸŒ¾ Llanos</span>
          <span class="origin-chip">ğŸ” Sierra Nevada</span>
        </div>
      </div>
      <div class="hero-card">
        <h3>Ordena sin filas</h3>
        <p>
          Elige tu helado, obtÃ©n tu turno y recÃ³gelo listo.
          Apoyamos comunidades indÃ­genas y campesinas colombianas.
        </p>
      </div>
    </div>
  </header>

  <!-- Contenido principal: catÃ¡logo + carrito -->
  <div class="client-main">

    <!-- CatÃ¡logo de productos -->
    <section>
      <div class="sec-header">
        <h2>Nuestro MenÃº</h2>
        <span class="sec-header-line"></span>
      </div>
      <!-- Las tarjetas se inyectan por JavaScript -->
      <div class="products-grid" id="productsGrid"></div>
    </section>

    <!-- Sidebar del pedido -->
    <aside class="order-sidebar">
      <div class="order-head">
        <h3>Tu Pedido</h3>
        <span class="order-count" id="orderCount">0</span>
      </div>
      <div class="order-items" id="orderItems">
        <div class="cart-empty">Tu carrito estÃ¡ vacÃ­o</div>
      </div>
      <div class="order-summary">
        <div class="sum-row">
          <span class="lbl">Tiempo estimado</span>
          <span><strong id="waitTime">0</strong> min</span>
        </div>
        <div class="sum-total">
          <span class="lbl">Total</span>
          <span class="val">$<span id="totalPrice">0</span></span>
        </div>
        <button class="checkout-btn" id="checkoutBtn" disabled>
          Confirmar Pedido
        </button>
      </div>
    </aside>

  </div><!-- /.client-main -->

  <footer>
    <p>Sabores ExÃ³ticos Â· HeladerÃ­a Artesanal</p>
    <p>Sistema de Pedidos en LÃ­nea Â· Isaac NÃºÃ±ez Â· Nicolas Betancourt Â· Daniel Rojas Â· 2026</p>
  </footer>

</section><!-- /#clientePage -->


<!-- ============================================================
     PÃGINA 2: COCINA â€” Panel Kanban
============================================================ -->
<section class="page kitchen-page" id="cocinaPage">

  <!-- Barra superior con estadÃ­sticas -->
  <div class="kitchen-bar">
    <h2>Panel de Cocina</h2>
    <div class="kitchen-stats">
      <div class="k-stat">
        <div class="k-stat-val" id="kPending">0</div>
        <div class="k-stat-lbl">Pendientes</div>
      </div>
      <div class="k-stat">
        <div class="k-stat-val" id="kProgress">0</div>
        <div class="k-stat-lbl">En proceso</div>
      </div>
      <div class="k-stat">
        <div class="k-stat-val" id="kDone">0</div>
        <div class="k-stat-lbl">Entregados hoy</div>
      </div>
    </div>
  </div>

  <!-- Kanban de 3 columnas -->
  <div class="kitchen-grid">
    <div>
      <div class="kitchen-col-header pending">â³ Pendientes</div>
      <div class="kitchen-col" id="colPending"></div>
    </div>
    <div>
      <div class="kitchen-col-header progress">ğŸ”¥ En PreparaciÃ³n</div>
      <div class="kitchen-col" id="colProgress"></div>
    </div>
    <div>
      <div class="kitchen-col-header done">âœ… Listos para Entrega</div>
      <div class="kitchen-col" id="colDone"></div>
    </div>
  </div>

</section><!-- /#cocinaPage -->


<!-- ============================================================
     PÃGINA 3: ERP / POS
============================================================ -->
<section class="page" id="erpPage">
  <div class="erp-layout">

    <!-- Sidebar de navegaciÃ³n del ERP -->
    <nav class="erp-sidebar">
      <ul class="erp-sidebar-nav">
        <li><span class="erp-sidebar-section">Principal</span></li>
        <li>
          <button class="active" onclick="showErpPanel('dashPanel', this)">
            <span class="ico">ğŸ“Š</span> Dashboard
          </button>
        </li>
        <li>
          <button onclick="showErpPanel('salesPanel', this)">
            <span class="ico">ğŸ’°</span> Ventas
          </button>
        </li>
        <li><span class="erp-sidebar-section">Inventario</span></li>
        <li>
          <button onclick="showErpPanel('inventoryPanel', this)">
            <span class="ico">ğŸ“¦</span> Inventario
          </button>
        </li>
        <li>
          <button onclick="showErpPanel('suppliersPanel', this)">
            <span class="ico">ğŸŒ¿</span> Proveedores
          </button>
        </li>
        <li><span class="erp-sidebar-section">AdministraciÃ³n</span></li>
        <li>
          <button onclick="showErpPanel('invoicesPanel', this)">
            <span class="ico">ğŸ§¾</span> Facturas
          </button>
        </li>
        <li>
          <button onclick="showErpPanel('reportsPanel', this)">
            <span class="ico">ğŸ“ˆ</span> Reportes
          </button>
        </li>
      </ul>
    </nav>

    <!-- Contenido principal del ERP -->
    <main class="erp-content">

      <!-- PANEL: Dashboard -->
      <div class="erp-panel active" id="dashPanel">
        <div class="erp-panel-header">
          <h2>Dashboard</h2>
          <p>Resumen operativo de hoy â€” <span id="dashDate"></span></p>
        </div>
        <div class="kpi-grid">
          <div class="kpi-card k1">
            <div class="kpi-lbl">Ventas Hoy</div>
            <div class="kpi-val" id="kpiSalesDay">$0</div>
            <div class="kpi-sub" id="kpiSalesSub">0 pedidos</div>
            <span class="kpi-icon">ğŸ’°</span>
          </div>
          <div class="kpi-card k2">
            <div class="kpi-lbl">Ventas Mes</div>
            <div class="kpi-val">$1.280.000</div>
            <div class="kpi-sub">â†‘ 12% vs mes anterior</div>
            <span class="kpi-icon">ğŸ“…</span>
          </div>
          <div class="kpi-card k3">
            <div class="kpi-lbl">Producto + Vendido</div>
            <div class="kpi-val" id="kpiBest">â€”</div>
            <div class="kpi-sub">Esta semana</div>
            <span class="kpi-icon">ğŸ†</span>
          </div>
          <div class="kpi-card k4">
            <div class="kpi-lbl">Tiempo Prom. Espera</div>
            <div class="kpi-val" id="kpiAvgTime">0 min</div>
            <div class="kpi-sub">Todos los pedidos hoy</div>
            <span class="kpi-icon">â±ï¸</span>
          </div>
        </div>
        <div class="bar-chart">
          <h3>Ventas por Producto (Hoy)</h3>
          <div class="bars" id="salesBars"></div>
        </div>
        <div class="erp-table-wrap">
          <div class="erp-table-head">
            <h3>Ãšltimos Pedidos</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Turno</th>
                <th>Productos</th>
                <th>Total</th>
                <th>T. Espera</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody id="recentOrdersBody">
              <tr>
                <td colspan="5" style="text-align:center;color:var(--muted);padding:2rem">
                  Sin pedidos aÃºn
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- PANEL: Ventas -->
      <div class="erp-panel" id="salesPanel">
        <div class="erp-panel-header">
          <h2>Registro de Ventas</h2>
          <p>Historial completo de transacciones</p>
        </div>
        <div class="erp-table-wrap">
          <div class="erp-table-head">
            <h3>Todas las Ventas</h3>
            <div class="actions">
              <button class="erp-btn erp-btn-green" onclick="exportCSV()">â¬‡ Exportar CSV</button>
            </div>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th><th>Turno</th><th>Productos</th>
                <th>Total</th><th>Tiempo</th><th>Fecha</th><th>Estado</th>
              </tr>
            </thead>
            <tbody id="salesBody">
              <tr>
                <td colspan="7" style="text-align:center;color:var(--muted);padding:2rem">
                  Sin ventas registradas
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- PANEL: Inventario -->
      <div class="erp-panel" id="inventoryPanel">
        <div class="erp-panel-header">
          <h2>GestiÃ³n de Inventario</h2>
          <p>Control de materias primas e insumos</p>
        </div>
        <div class="erp-table-wrap">
          <div class="erp-table-head">
            <h3>Ingredientes &amp; Materias Primas</h3>
            <div class="actions">
              <button class="erp-btn erp-btn-primary" onclick="openModal('modalInventory')">
                + Nuevo Insumo
              </button>
            </div>
          </div>
          <table>
            <thead>
              <tr>
                <th>Insumo</th><th>Origen</th><th>Stock</th>
                <th>Unidad</th><th>MÃ­n.</th><th>Estado</th><th>Acciones</th>
              </tr>
            </thead>
            <tbody id="inventoryBody"></tbody>
          </table>
        </div>
      </div>

      <!-- PANEL: Proveedores -->
      <div class="erp-panel" id="suppliersPanel">
        <div class="erp-panel-header">
          <h2>Proveedores Comunitarios</h2>
          <p>Comunidades indÃ­genas, campesinas y regiones biodiversas</p>
        </div>
        <div class="erp-table-wrap">
          <div class="erp-table-head">
            <h3>Red de Proveedores</h3>
            <div class="actions">
              <button class="erp-btn erp-btn-primary" onclick="openModal('modalSupplier')">
                + Nuevo Proveedor
              </button>
            </div>
          </div>
          <table>
            <thead>
              <tr>
                <th>Proveedor / Comunidad</th><th>RegiÃ³n</th><th>Productos</th>
                <th>CertificaciÃ³n</th><th>Estado</th><th>Acciones</th>
              </tr>
            </thead>
            <tbody id="suppliersBody"></tbody>
          </table>
        </div>
      </div>

      <!-- PANEL: Facturas -->
      <div class="erp-panel" id="invoicesPanel">
        <div class="erp-panel-header">
          <h2>FacturaciÃ³n</h2>
          <p>Facturas generadas por el sistema POS</p>
        </div>
        <div class="erp-table-wrap">
          <div class="erp-table-head">
            <h3>Facturas Emitidas</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>NÂ° Factura</th><th>Turno</th><th>Items</th>
                <th>Subtotal</th><th>IVA (19%)</th><th>Total</th><th>Fecha</th>
              </tr>
            </thead>
            <tbody id="invoicesBody">
              <tr>
                <td colspan="7" style="text-align:center;color:var(--muted);padding:2rem">
                  Sin facturas generadas
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- PANEL: Reportes -->
      <div class="erp-panel" id="reportsPanel">
        <div class="erp-panel-header">
          <h2>Reportes &amp; AnalÃ­ticas</h2>
          <p>Indicadores de desempeÃ±o del negocio</p>
        </div>
        <div class="kpi-grid">
          <div class="kpi-card k1">
            <div class="kpi-lbl">Sabor + Rentable</div>
            <div class="kpi-val">Pistacho</div>
            <div class="kpi-sub">Margen 68%</div>
            <span class="kpi-icon">ğŸ†</span>
          </div>
          <div class="kpi-card k2">
            <div class="kpi-lbl">Proveedor Top</div>
            <div class="kpi-val">Cabildo Uitoto</div>
            <div class="kpi-sub">Amazonas</div>
            <span class="kpi-icon">ğŸŒ¿</span>
          </div>
          <div class="kpi-card k3">
            <div class="kpi-lbl">Clientes Atendidos</div>
            <div class="kpi-val" id="rptClients">0</div>
            <div class="kpi-sub">Este mes</div>
            <span class="kpi-icon">ğŸ‘¥</span>
          </div>
          <div class="kpi-card k4">
            <div class="kpi-lbl">T. Prom. PreparaciÃ³n</div>
            <div class="kpi-val">3.8 min</div>
            <div class="kpi-sub">Meta: &lt; 5 min âœ…</div>
            <span class="kpi-icon">âš¡</span>
          </div>
        </div>
        <div class="bar-chart">
          <h3>Ventas por RegiÃ³n de Origen (Mes Actual)</h3>
          <div class="bars">
            <div class="bar-col">
              <div class="bar-val">32%</div>
              <div class="bar-fill" style="height:120px; background:linear-gradient(180deg,#C85F3C,#A8462A)"></div>
              <div class="bar-lbl">Amazonas</div>
            </div>
            <div class="bar-col">
              <div class="bar-val">18%</div>
              <div class="bar-fill" style="height:68px; background:linear-gradient(180deg,#C9A227,#9c7b1a)"></div>
              <div class="bar-lbl">ChocÃ³</div>
            </div>
            <div class="bar-col">
              <div class="bar-val">25%</div>
              <div class="bar-fill" style="height:95px; background:linear-gradient(180deg,#4A7C59,#355C41)"></div>
              <div class="bar-lbl">Caribe</div>
            </div>
            <div class="bar-col">
              <div class="bar-val">10%</div>
              <div class="bar-fill" style="height:38px; background:linear-gradient(180deg,#7a6bde,#5a4eca)"></div>
              <div class="bar-lbl">Llanos</div>
            </div>
            <div class="bar-col">
              <div class="bar-val">15%</div>
              <div class="bar-fill" style="height:58px; background:linear-gradient(180deg,#6dbf8c,#4a9969)"></div>
              <div class="bar-lbl">Sierra Nev.</div>
            </div>
          </div>
        </div>
      </div>

    </main><!-- /.erp-content -->
  </div><!-- /.erp-layout -->
</section><!-- /#erpPage -->


<!-- ============================================================
     MODAL: Ticket de turno (Cliente)
============================================================ -->
<div class="modal-overlay" id="ticketModal">
  <div class="ticket-box">
    <div class="ticket-head">
      <h2>Â¡Pedido Confirmado!</h2>
      <p>Sabores ExÃ³ticos Â· HeladerÃ­a Artesanal</p>
    </div>
    <div class="ticket-body">
      <div class="ticket-lbl">Tu nÃºmero de turno</div>
      <div class="ticket-num" id="ticketNum">001</div>
      <div class="ticket-rows">
        <div class="ticket-row">
          <span class="lbl">Total a pagar</span>
          <span class="val">$<span id="ticketTotal">0</span></span>
        </div>
        <div class="ticket-row">
          <span class="lbl">Tiempo de espera</span>
          <span class="val"><span id="ticketTime">0</span> minutos</span>
        </div>
      </div>
      <button class="ticket-close" onclick="closeTicket()">Cerrar</button>
    </div>
  </div>
</div>


<!-- ============================================================
     MODAL: Nuevo Insumo (ERP â€” Inventario)
============================================================ -->
<div class="erp-modal-overlay" id="modalInventory">
  <div class="erp-modal">
    <div class="erp-modal-head">
      <h3>Nuevo Insumo</h3>
      <button class="erp-modal-close" onclick="closeModal('modalInventory')">Ã—</button>
    </div>
    <div class="erp-modal-body">
      <div class="form-row">
        <div class="form-group">
          <label>Nombre del insumo</label>
          <input type="text" id="invName" placeholder="Ej: Pulpa de LÃºcuma" />
        </div>
        <div class="form-group">
          <label>Origen / RegiÃ³n</label>
          <input type="text" id="invOrigin" placeholder="Ej: Amazonas" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Stock Actual</label>
          <input type="number" id="invStock" placeholder="0" min="0" />
        </div>
        <div class="form-group">
          <label>Unidad</label>
          <select id="invUnit">
            <option>kg</option>
            <option>L</option>
            <option>g</option>
            <option>ml</option>
            <option>unidades</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Stock MÃ­nimo (alerta)</label>
        <input type="number" id="invMin" placeholder="0" min="0" />
      </div>
    </div>
    <div class="erp-modal-foot">
      <button class="erp-btn erp-btn-cancel" onclick="closeModal('modalInventory')">Cancelar</button>
      <button class="erp-btn erp-btn-primary" onclick="saveInventoryItem()">Guardar</button>
    </div>
  </div>
</div>


<!-- ============================================================
     MODAL: Nuevo Proveedor (ERP â€” Proveedores)
============================================================ -->
<div class="erp-modal-overlay" id="modalSupplier">
  <div class="erp-modal">
    <div class="erp-modal-head">
      <h3>Nuevo Proveedor</h3>
      <button class="erp-modal-close" onclick="closeModal('modalSupplier')">Ã—</button>
    </div>
    <div class="erp-modal-body">
      <div class="form-group">
        <label>Nombre / Comunidad</label>
        <input type="text" id="supName" placeholder="Ej: Cabildo IndÃ­gena Uitoto" />
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>RegiÃ³n</label>
          <select id="supRegion">
            <option>Amazonas</option>
            <option>ChocÃ³</option>
            <option>Caribe</option>
            <option>Llanos Orientales</option>
            <option>Sierra Nevada</option>
            <option>Otra</option>
          </select>
        </div>
        <div class="form-group">
          <label>CertificaciÃ³n</label>
          <select id="supCert">
            <option>Comercio Justo</option>
            <option>OrgÃ¡nico</option>
            <option>AgroecolÃ³gico</option>
            <option>Sin certificaciÃ³n</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label>Productos Suministrados</label>
        <input type="text" id="supProducts" placeholder="Ej: Pulpa de lÃºcuma, Cacao" />
      </div>
    </div>
    <div class="erp-modal-foot">
      <button class="erp-btn erp-btn-cancel" onclick="closeModal('modalSupplier')">Cancelar</button>
      <button class="erp-btn erp-btn-primary" onclick="saveSupplier()">Guardar</button>
    </div>
  </div>
</div>


<!-- ============================================================
     TOAST / ALERTA
============================================================ -->
<div class="alert-banner" id="alertBanner">
  <span class="ico">âœ…</span>
  <span id="alertMsg">Guardado correctamente</span>
</div>


<!-- ============================================================
     SCRIPT PRINCIPAL (al final del body para mejor rendimiento)
============================================================ -->
<script src="app.js"></script>

</body>
</html>